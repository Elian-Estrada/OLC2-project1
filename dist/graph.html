<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CST</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/viz.js/1.3.0/viz.js"> </script>
</head>

<body style="background-color: #212121;">

    <div style="align-self: center;">
        <div class="container">
            <div class="container">
                <div style="text-align: center" class="card grey darken-3 z-depth-4">
                    <h3 style="color: white; padding: 3%;">Syntax Analize Tree</h3>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col l12">
                <div style="align-self: center;"></div>
                <div id="ast"></div>
            </div>
        </div>
    </div>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const content = document.getElementById("ast");

            let dot = localStorage.getItem("dot");
            console.log(dot);
            let options = {
                format: 'svg'
            };

            let image = Viz(dot !== null ? dot : `digraph g {
                ranksep="1"
                nodesep="1.3"
                bgcolor = "#090B10";
                fontcolor = "white";
                edge[color="#56cdff"];
                node [style="filled" fillcolor = "#0F111A" fontcolor = "white" color = "#007acc"];
                label = "AST";
                n0 [label="expr"]; n1 [label="expr"]; n2 [label="+"]; n3 [label="term"]; n4 [label="{print('+')}"];
                n0 -> n1; n0 -> n2; n0 -> n3; n0 -> n4;
                n5 [label="expr"]; n6 [label="-"]; n7 [label="term"]; n8 [label="{print('-')}"];
                n1 -> n5; n1 -> n6; n1 -> n7; n1 -> n8;
                n9 [label="term"]; n10 [label="9"]; n11 [label="{print('9')}"];
                n5 -> n9; n9 -> n10; n9 -> n11;
                n12 [label="5"]; n13 [label="{print('5')}"];
                n7 -> n12; n7 -> n13;
                n14 [label="term"];
                n3 -> n14;
                n15 [label="2"]; n16 [label="{print('2')}"];
                n14 -> n15; n14 -> n16;
            }`, options);

            content.innerHTML = image;
            content.appendChild(image);
        });
    </script>
</body>

</html>